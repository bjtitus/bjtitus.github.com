<!DOCTYPE html>
<html>

  {% include head.html %}

  <body>

	<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.6.0/mapbox-gl.css' rel='stylesheet' />
	<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.6.0/mapbox-gl.js'></script>

    <div id="photoheader" style="position: absolute; width: 100%; text-align: center;">
      {% include photoheader.html %}
    </div>

    <script>
		// Picture element HTML5 shiv
		document.createElement( "picture" );
	</script>

    {{ content }}

    {% include photofooter.html %}

    {% include photoswipe.html %}

	<script src="https://cdnjs.cloudflare.com/ajax/libs/picturefill/2.3.1/picturefill.min.js"></script>
    <link rel="stylesheet" href="/vendor/photoswipe/photoswipe.css">
    <link rel="stylesheet" href="/vendor/photoswipe/default-skin/default-skin.css">
    <script src="/vendor/photoswipe/photoswipe.js"></script>
    <script src="/vendor/photoswipe/photoswipe-ui-default.js"></script>

	<script>
	var pswpElement = document.querySelectorAll('.pswp')[0];

	var items = [];

	var images = document.querySelectorAll('img');

	function addClickHandler(element, i) {
		element.addEventListener('click', function() {

			console.log("Clicked on image");
			console.log(image);

			var options = {
				index: i
			};

			var gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options );
			gallery.init();
		});
	}

	for (var i = 0; i < images.length; i++) {
		var image = images[i];

		items.push({
			src: image.src,
			w: image.dataset.width,
			h: image.dataset.height
		});
	}

	console.log(items);

	for (var i = 0; i < images.length; i++) {
		var image = images[i];

		// image.onClick
		addClickHandler(image, i);
	}


	</script>

  </body>

</html>